import React from 'react'
import activePage from '../../compenent/ActivePage/ActivePage';
import "./Images.css"
import { useDispatch, useSelector } from 'react-redux';
import { setLoaderspinner } from '../../Redux/action';
import loaderspinnergif from '../../assets/gif/loaderspinnergif.gif'

function Images() {

    const { loaderspinner, navbar_searchValur } = useSelector((state) => state);
    const dispatch = useDispatch();

    const [pageNumber, setpageNumber] = React.useState(1);
    const [imageData, setImageData] = React.useState({ hits: [] });

    React.useEffect(() => {
        activePage("images__page")
    }, []);

    React.useEffect(() => {

        if (navbar_searchValur !== "") {
            dispatch(setLoaderspinner(true))
            fetch(`https://pixabay.com/api/?key=${process.env.REACT_APP_IMAGE_API_KEY}&q=${navbar_searchValur}&per_page=175&page=${pageNumber}`)
                .then((res) => res.json())
                .then((data) => { return setImageData(data), dispatch(setLoaderspinner(false)) })
                .catch((err) => console.log(err))
        }
    }, [navbar_searchValur, pageNumber]);

    return (
        <div className='images__page'>

            {loaderspinner ? <span className='data__loader'>
                <img className='data__loaderspinner' src={loaderspinnergif} alt="" />
            </span> :
                <div className='images__imageDataPart'>
                    {
                        imageData.hits.length > 0 ? <div className='images__imageData'> {imageData.hits.map((data) => <div key={data.id} className='images__imageItem'>
                            <div className='images__imageItemImage'>
                                <img src={data.largeImageURL} alt={data.tags} />
                            </div>
                            <div>
                                <div className='images__imageItemInfo'>
                                    <span>
                                        <svg xmlns="http://www.w3.org/2000/svg" shapeRendering="geometricPrecision" textRendering="geometricPrecision" imagefendering="optimizeQuality" fillRule="evenodd" clipRule="evenodd" viewBox="0 0 512 396.94"><path fillRule="nonzero" d="M49.63 0h336.95c13.64 0 26.03 5.64 35 14.6l.82.91c8.52 8.93 13.79 21.03 13.79 34.13v182.01c-8.72-2.42-17.63-4.27-26.69-5.48V192.2l-36.96 32.61c-21.85 1.34-42.73 6.43-62.42 14.53l-40.98-39.31-27.44 78.69c-.4 2.81-1.59 5.18-3.25 7.02l-1.7 1.57c-5.12 3.94-12.95 3.92-17.94-1.81l-78.13-118.22L26.7 262.86v79.61c0 6.25 2.62 11.97 6.77 16.13 4.19 4.19 9.95 6.81 16.16 6.81H235c10.6 9.86 21.96 18.81 33.95 26.69H49.63c-13.57 0-26.02-5.61-35.03-14.63-8.96-8.96-14.6-21.37-14.6-35V49.64c0-13.66 5.59-26.09 14.57-35.07l.92-.84C24.42 5.24 36.46 0 49.63 0zm337.74 292.43c9.66 0 18.41 3.92 24.74 10.24 6.33 6.33 10.24 15.07 10.24 24.74 0 9.65-3.91 18.41-10.24 24.73-6.33 6.33-15.06 10.25-24.74 10.25-9.65 0-18.4-3.92-24.73-10.25a34.82 34.82 0 0 1-10.24-24.73c0-9.65 3.91-18.41 10.24-24.74 6.33-6.32 15.08-10.24 24.73-10.24zm-122.68 29.88c28.32-34.25 72.44-63.49 117.77-64.39 48.01-.97 96.09 29.72 127.66 64.45a7.207 7.207 0 0 1 .47 9.14c-26.32 37.15-73.49 65.2-119.34 65.43-46.78.21-97.89-28.89-126.93-65.24-2.25-2.84-2.03-6.84.37-9.39zm20.04 4.96c26.61 30.85 65.31 52.73 106.3 52.55 39.43-.19 75.09-21.01 99.09-52.07-28.24-29.46-65.39-53.54-107.15-52.72-39.06.79-73.06 23.66-98.24 52.24zM26.7 227.39c29.55-26.64 76.84-63.89 106.71-88.99 4.87-4.22 12.12-4.13 16.91-.04.97.81 1.68 1.78 2.49 2.75l67.52 105.51 26.92-75.68c1.99-10.57 14.47-14.08 22.04-7.05l62.79 60.12 77.42-72.04V49.64c0-5.94-2.36-11.48-6.2-15.61l-.6-.56c-4.16-4.15-9.88-6.77-16.12-6.77H49.63c-6.04 0-11.54 2.34-15.61 6.12l-.58.62c-4.15 4.16-6.74 9.9-6.74 16.2v177.75zM267.63 61.07c11.02 0 21.04 4.49 28.28 11.73 7.24 7.24 11.72 17.23 11.72 28.28 0 11.02-4.48 21.04-11.72 28.28-7.24 7.24-17.26 11.72-28.28 11.72-11.04 0-21.04-4.48-28.28-11.72-7.24-7.24-11.72-17.26-11.72-28.28 0-11.05 4.48-21.04 11.72-28.28 7.24-7.24 17.24-11.73 28.28-11.73zm12.21 27.8a17.249 17.249 0 0 0-12.21-5.04c-4.77 0-9.09 1.93-12.2 5.04a17.198 17.198 0 0 0-5.05 12.21c0 4.77 1.93 9.09 5.05 12.2 3.11 3.11 7.43 5.05 12.2 5.05s9.09-1.94 12.21-5.05c3.11-3.11 5.04-7.43 5.04-12.2s-1.93-9.1-5.04-12.21z" /></svg>
                                        {data.views}</span>

                                    <span>
                                        <svg xmlns="http://www.w3.org/2000/svg" shapeRendering="geometricPrecision" textRendering="geometricPrecision" imageRendering="optimizeQuality" fillRule="evenodd" clipRule="evenodd" viewBox="0 0 512 425.29"><path d="M256 196c63.31 0 114.65 51.33 114.65 114.65 0 63.32-51.34 114.64-114.65 114.64-63.32 0-114.65-51.32-114.65-114.64S192.68 196 256 196zm103.79-71.3c-3.13 1.55-6.3 3.25-9.42 5.05-9.37 5.49-18.63 12.21-28.08 19.92l-20.17-23.09c6.96-6.45 14.5-12.33 22.5-17.53 6.37-4.17 13.04-7.88 19.92-11.05 2.75-1.38 5.5-2.67 8.33-3.87-13.29-23.55-32.42-40.42-54.09-50.83-43.06-20.62-96.68-16.14-134.61 13.32-21.79 16.88-38.33 42.13-44.71 75.59l-2 10.45-10.42 1.84c-10.21 1.79-19.32 4.25-27.33 7.37-7.75 3.01-14.66 6.72-20.7 11.09-4.84 3.5-9.01 7.42-12.54 11.66-10.97 13.13-16.05 29.58-15.93 46.26.13 16.9 5.63 33.99 15.8 48.03 3.79 5.21 8.16 10.01 13.16 14.17 5.09 4.2 10.79 7.7 17.21 10.34 6.37 2.62 13.42 4.49 21.21 5.58h11.34c-.31 3.84-.46 7.73-.46 11.64 0 6.45.41 12.8 1.22 19.02h-12.6l-1.92-.16c-11.12-1.42-21.21-4.05-30.37-7.83-9.46-3.93-17.84-8.97-25.21-15.13-7-5.84-13.12-12.46-18.33-19.67C7.67 267.71.17 244.29 0 220.95c-.16-23.58 7.17-47.03 23.01-66.04 5.12-6.16 11.15-11.83 18.07-16.83 8.05-5.83 17.25-10.75 27.68-14.78 7.16-2.8 14.82-5.14 22.91-7.01 9.17-36.41 28.71-64.45 53.83-83.92C192.57-4.1 258.61-9.92 312.04 15.75c29.2 14.05 54.7 37.42 71.25 70.29 6.66-1.04 13.33-1.58 19.95-1.5 69.26.52 109.46 59.53 108.75 124.04-.29 26.29-7.37 52.46-21.88 71.71-9.45 12.54-21.58 22.79-36.12 30.91-13.99 7.84-30.33 13.8-48.66 18.05l-3.34.4a148.914 148.914 0 0 0 .7-31.27c13.69-3.49 25.85-8.07 36.26-13.88 10.96-6.13 19.92-13.59 26.62-22.54 10.42-13.88 15.55-33.5 15.75-53.63.57-47.22-26.49-92.88-78.29-93.2-14.29-.13-29.16 3.33-43.24 9.57zm-56.22 178.56c3.65.15 6.24 1.36 7.73 3.64 4.06 6.08-1.47 12.09-5.32 16.33-10.91 11.96-37.64 40.73-43.02 47.06-4.07 4.51-9.89 4.51-13.96 0-5.56-6.49-33.63-36.57-44-48.21-3.6-4.05-8.05-9.57-4.3-15.18 1.53-2.28 4.09-3.49 7.74-3.64h22.14v-32.17c0-5.84 4.78-10.64 10.64-10.64h29.56c5.85 0 10.65 4.79 10.65 10.64v32.17h22.14z" /></svg>
                                        {data.downloads}</span>

                                </div>
                                <p>
                                    <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="122.879px" height="106.533px" viewBox="0 0 122.879 106.533" space="preserve">
                                        <g>
                                            <path d="M79.704,105.239c-1.2,1.072-3.042,0.971-4.115-0.229c-1.073-1.2-0.971-3.042,0.229-4.115l39.432-35.204l0.012-0.01v-0.001 c0.569-0.503,0.995-1.045,1.281-1.629c0.281-0.574,0.443-1.229,0.487-1.963c0.044-0.732-0.041-1.404-0.255-2.016 c-0.213-0.605-0.572-1.192-1.077-1.761l-0.048-0.055L70.895,9.569c-1.092-1.187-1.015-3.035,0.172-4.126s3.034-1.015,4.126,0.172 l44.758,48.693c0.038,0.039,0.075,0.078,0.112,0.119c1.004,1.127,1.744,2.37,2.22,3.727c0.474,1.352,0.665,2.777,0.575,4.277 c-0.09,1.497-0.448,2.89-1.081,4.182c-0.629,1.283-1.512,2.427-2.653,3.435l-0.001-0.001L79.704,105.239L79.704,105.239z M54.383,3.131h0.738v0.006c0.788,0,1.574,0.317,2.149,0.942l44.758,48.694c0.038,0.039,0.075,0.078,0.111,0.119 c1.005,1.128,1.745,2.37,2.221,3.727c0.474,1.352,0.665,2.777,0.575,4.278c-0.091,1.496-0.449,2.89-1.082,4.181 c-0.628,1.283-1.511,2.427-2.653,3.435v-0.001l-39.291,35.077c-0.026,0.028-0.055,0.055-0.083,0.082 c-1.113,1.032-2.346,1.787-3.698,2.266c-1.34,0.474-2.774,0.666-4.302,0.575c-1.53-0.091-2.936-0.451-4.219-1.076 c-1.287-0.628-2.435-1.511-3.447-2.647l-42.083-47.2l0.001-0.001c-0.505-0.567-0.79-1.33-0.732-2.147l0.086-1.181L0.006,3.114h0 c-0.008-0.124-0.009-0.25,0-0.377c0.101-1.609,1.487-2.833,3.097-2.731L53.451,3.22c0.063-0.01,0.127-0.02,0.192-0.028 C53.934,3.151,54.182,3.131,54.383,3.131L54.383,3.131z M53.922,9.068c-0.195,0.019-0.389,0.018-0.579-0.002L6.066,6.047 l3.208,46.027c0.009,0.135,0.009,0.269-0.001,0.4h0.001l-0.011,0.148l41.261,46.28c0.498,0.559,1.045,0.984,1.642,1.275 c0.6,0.292,1.267,0.462,2.001,0.505c0.738,0.044,1.41-0.042,2.016-0.256c0.594-0.21,1.149-0.554,1.663-1.031 c0.059-0.055,0.12-0.106,0.182-0.155l39.296-35.082l0.012-0.011l-0.001-0.001c0.569-0.502,0.996-1.045,1.281-1.628 c0.282-0.575,0.443-1.229,0.488-1.964c0.044-0.732-0.042-1.404-0.256-2.016c-0.213-0.605-0.571-1.192-1.077-1.761l-0.048-0.055 L53.922,9.068L53.922,9.068z M24.268,12.234c1.474,0.04,2.833,0.335,4.078,0.885c1.256,0.555,2.392,1.36,3.406,2.413l0.013,0.015 c1.006,1.042,1.766,2.204,2.278,3.485c0.519,1.298,0.779,2.68,0.779,4.145c0,0.127-0.008,0.252-0.024,0.375 c-0.071,1.347-0.37,2.605-0.895,3.772l-0.005,0.01l0.005,0.002c-0.563,1.251-1.38,2.386-2.446,3.404 c-0.063,0.06-0.128,0.117-0.195,0.17c-1.023,0.923-2.145,1.621-3.363,2.09c-1.271,0.489-2.614,0.72-4.031,0.69v0.01 c-1.463,0-2.838-0.278-4.123-0.832c-1.265-0.544-2.419-1.354-3.459-2.424l-0.012-0.012v0c-1.028-1.067-1.796-2.246-2.304-3.537 c-0.504-1.285-0.738-2.663-0.698-4.133c0.039-1.495,0.334-2.873,0.892-4.135c0.564-1.278,1.387-2.43,2.473-3.457 c1.058-1,2.232-1.75,3.521-2.247S22.818,12.195,24.268,12.234L24.268,12.234z M25.991,18.468c-0.57-0.251-1.19-0.387-1.86-0.405 c-0.681-0.019-1.305,0.082-1.87,0.3c-0.568,0.22-1.11,0.573-1.625,1.059c-0.5,0.472-0.874,0.992-1.124,1.56 c-0.257,0.582-0.394,1.222-0.412,1.918c-0.019,0.674,0.085,1.297,0.31,1.869c0.224,0.571,0.582,1.11,1.069,1.617l0,0 c0.485,0.497,1.01,0.867,1.574,1.109c0.543,0.234,1.148,0.351,1.814,0.351v0.011l0.069,0.001c0.688,0.019,1.315-0.082,1.882-0.3 c0.528-0.203,1.032-0.518,1.512-0.943c0.033-0.036,0.068-0.07,0.104-0.104c0.506-0.483,0.888-1.009,1.143-1.576l0.004,0.002 c0.224-0.502,0.355-1.047,0.392-1.636c-0.002-0.041-0.003-0.083-0.003-0.125c0-0.74-0.115-1.398-0.345-1.973 c-0.231-0.579-0.586-1.115-1.063-1.607l-0.018-0.018C27.072,19.087,26.554,18.717,25.991,18.468L25.991,18.468z M52.422,31.36 c-1.092-1.187-1.015-3.035,0.171-4.126c1.187-1.092,3.034-1.015,4.126,0.172l24.931,27.04c1.092,1.187,1.015,3.034-0.172,4.126 s-3.034,1.016-4.126-0.172L52.422,31.36L52.422,31.36z M40.49,42.661c-1.092-1.187-1.015-3.034,0.171-4.126 c1.187-1.092,3.034-1.016,4.126,0.171l24.931,27.04c1.092,1.187,1.015,3.034-0.172,4.126c-1.188,1.092-3.035,1.016-4.127-0.171 L40.49,42.661L40.49,42.661z M28.074,53.962c-1.092-1.187-1.015-3.035,0.171-4.126c1.187-1.092,3.035-1.015,4.126,0.171 l24.931,27.04c1.092,1.188,1.016,3.034-0.171,4.126s-3.034,1.016-4.126-0.171L28.074,53.962L28.074,53.962z" />
                                        </g>
                                    </svg>
                                    {data.tags}</p>
                            </div>
                        </div>)}</div> : <p>Image for "{navbar_searchValur}" not found</p>
                    }


                    <div className='images__imagePagination'>
                        {/* PREVIOUS PAGE */}
                        <button disabled={pageNumber <= 1 ? true : false} onClick={() => setpageNumber(pageNumber - 1)}> &#8612;</button>
                        <span>{pageNumber}</span>
                        {/* NEXT PAGE */}
                        <button disabled={Math.floor(imageData.totalHits / 175) < pageNumber ? true : false} onClick={() => setpageNumber(pageNumber + 1)}> &#8614;</button>
                    </div>
                </div>
            }
        </div>
    )
}

export default Images